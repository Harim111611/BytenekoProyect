{# templates/surveys/_stepper.html #}
<div class="d-flex align-items-center justify-content-between mt-1 mb-3">
  <div class="small text-muted">Paso {{ step }} de 3</div>
  <div class="small text-muted">
    {% if progress %}{{ progress }}{% else %}{% widthratio step 3 100 %}{% endif %}%&nbsp;completado
  </div>
</div>

<div class="row g-3 mb-3">
  {# Recorremos 3 pasos usando make_list y forloop.counter (1..3) #}
  {% for _ in "123"|make_list %}
    {% with i=forloop.counter %}
      <div class="col-12 col-md-4">
        <div class="card h-100
                    {% if step >= i %}border-primary{% else %}border-light{% endif %}
                    {% if step > i %} bg-success-subtle{% endif %}
                    {% if step == i %} shadow-sm{% endif %}">
          <div class="card-body d-flex gap-3">
            <div class="flex-shrink-0 d-flex align-items-center justify-content-center rounded-circle
                        {% if step >= i %}bg-primary text-white{% else %}bg-light text-secondary{% endif %}"
                 style="width: 40px; height: 40px;">
              {{ i }}
            </div>
            <div class="flex-grow-1">
              <div class="fw-semibold mb-1">
                {% if i == 1 %}Datos generales{% elif i == 2 %}Configuración{% else %}Confirmación{% endif %}
              </div>
              <div class="text-muted small">
                {% if i == 1 %}Define el nombre y objetivo.{% elif i == 2 %}Revisa opciones y público objetivo.{% else %}Guarda y publica.{% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    {% endwith %}
  {% endfor %}
</div>
