{% comment %} Floating toasts for Django messages. Avoids layout shift. {% endcomment %}
<div class="toast-container position-fixed top-0 start-50 translate-middle-x p-3" style="z-index: 1080; width: min(720px, 92vw); margin-top: var(--bnk-toast-offset, 72px);">
  {% if messages %}
    {% for message in messages %}
      <div class="toast align-items-center border-0 shadow-sm mb-2" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="4000">
        <div class="d-flex">
          <div class="toast-body">
            {% if message.tags %}
              <i class="bi {% if 'success' in message.tags %}bi-check-circle-fill{% elif 'warning' in message.tags %}bi-exclamation-triangle-fill{% elif 'error' in message.tags %}bi-x-circle-fill{% else %}bi-info-circle-fill{% endif %} me-2"></i>
            {% endif %}
            {{ message }}
          </div>
          <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
        </div>
      </div>
    {% endfor %}
  {% endif %}
</div>
<script>
  (function () {
    if (!window.bootstrap) return;
    var elList = document.querySelectorAll('.toast');
    elList.forEach(function (el) {
      try { new bootstrap.Toast(el).show(); } catch(e) {}
    });
  })();
</script>
